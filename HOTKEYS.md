# 抽獎系統鍵盤熱鍵說明

本系統支援鍵盤熱鍵操作，方便配合實體按鈕使用。

## 可用熱鍵

### 主要抽獎熱鍵

| 熱鍵 | 功能 | 說明 |
|------|------|------|
| **Enter** | 開始抽獎 | 根據當前模式（單次/批次）執行抽獎 |
| **Space** | 開始抽獎 | 與 Enter 功能相同，空白鍵也可觸發 |
| **1** | 單次抽獎 | 僅在單次抽獎模式下觸發 |
| **2** | 批次抽獎 | 僅在批次抽獎模式下觸發 |

## 使用情境

### 1. 單次抽獎模式
```
1. 選擇獎項
2. 按下 Enter 或 Space 或 1 → 開始滾輪抽獎
3. 等待滾輪停止顯示中獎者
4. 再次按下 Enter 或 Space 或 1 → 重抽（保留當前中獎記錄）
```

### 2. 批次抽獎模式
```
1. 選擇獎項
2. 設定抽獎數量
3. 按下 Enter 或 Space 或 2 → 開始批次抽獎
4. 顯示中獎名單
5. 再次按下 Enter 或 Space 或 2 → 重抽（根據重抽次數）
```

### 3. 重抽功能
```
顯示中獎結果時，相同快捷鍵會自動切換為重抽功能：
- 單次模式：重抽指定次數
- 批次模式：重抽 (批次數量 × 重抽次數) 個中獎者
- 重抽不會移除當前中獎記錄，而是額外抽選新的中獎者
```

## 配合實體按鈕使用

### 硬體設定建議

#### USB 鍵盤按鈕
- 購買可編程 USB 按鈕（如 Raspberry Pi 按鈕、Arduino 按鈕等）
- 將按鈕設定為發送 Enter 鍵訊號
- 連接電腦即可使用

#### 常見實體按鈕設備
1. **USB 大按鈕** - Amazon/淘寶可購買
2. **可編程鍵盤** - 設定巨集鍵為 Enter
3. **遊戲控制器** - 設定按鈕對應 Enter 鍵
4. **自製按鈕** - Arduino + 按鈕 + USB HID

### 推薦配置

#### 方案一：單按鈕（最簡單）
```
大紅色按鈕 = Enter 鍵
用途：開始抽獎
```

#### 方案二：雙按鈕
```
綠色按鈕 = 1 鍵（單次抽獎）
藍色按鈕 = 2 鍵（批次抽獎）
```

#### 方案三：完整控制
```
大紅色按鈕 = Enter 鍵（主抽獎）
綠色按鈕 = 1 鍵（單次模式）
藍色按鈕 = 2 鍵（批次模式）
黃色按鈕 = Space 鍵（備用）
```

## 安全機制

### 自動防護
系統已內建以下安全機制：

1. ✅ **防止誤觸**：在輸入框中按鍵不會觸發抽獎
2. ✅ **狀態檢查**：只有在可以抽獎時才會執行
3. ✅ **防止重複**：抽獎進行中無法再次觸發
4. ✅ **條件限制**：必須選擇獎項且獎項有剩餘數量

### 何時無法觸發
- ❌ 沒有選擇獎項
- ❌ 獎項已抽完（非無限數量）
- ❌ 正在抽獎中
- ❌ 在輸入框內按鍵
- ❌ 在文字編輯器中

## 技術細節

### 事件監聽
系統在 window 層級監聽 `keydown` 事件。

### 優先順序
1. Enter/Space - 最高優先級（通用）
2. 數字鍵 1/2 - 特定模式

### 瀏覽器兼容性
- ✅ Chrome/Edge
- ✅ Firefox
- ✅ Safari
- ✅ Opera

## 故障排除

### 熱鍵無反應？

#### 檢查清單：
1. ⬜ 是否已選擇獎項？
2. ⬜ 獎項是否還有剩餘數量？
3. ⬜ 是否正在抽獎中？
4. ⬜ 瀏覽器視窗是否在焦點？
5. ⬜ 是否在輸入框內？

#### 解決方案：
- 確保瀏覽器視窗為活動視窗
- 點擊抽獎畫面任意處獲得焦點
- 檢查開發者工具的 Console 是否有錯誤訊息

### 按鈕沒反應？

#### USB 按鈕檢查：
1. 開啟記事本測試按鈕是否輸出字元
2. 確認按鈕設定為正確的按鍵（Enter/Space/1/2）
3. 檢查 USB 連接是否正常
4. 嘗試重新插拔 USB

## 自訂熱鍵

如需自訂熱鍵，請修改 `src/components/DrawScreen.jsx` 中的鍵盤事件處理函數：

```javascript
// 在 useEffect 中找到以下程式碼
const handleKeyPress = (event) => {
  // 修改熱鍵對應
  if (event.key === 'Enter' || event.key === ' ') {
    // 開始抽獎
  }
  
  // 可以添加更多自訂熱鍵
  if (event.key === 'F1') {
    // 自訂功能
  }
};
```

### 可用的 event.key 值：
- `'Enter'` - Enter 鍵
- `' '` - Space 空白鍵
- `'1'`, `'2'`, ... - 數字鍵
- `'a'`, `'b'`, ... - 字母鍵
- `'F1'`, `'F2'`, ... - 功能鍵
- `'ArrowUp'`, `'ArrowDown'` - 方向鍵

## 最佳實踐

### 建議設定
1. **簡單模式**：只使用 Enter 鍵，操作簡單不易出錯
2. **專業模式**：使用數字鍵區分單次/批次，提高效率
3. **展示模式**：使用大型實體按鈕，增加儀式感

### 使用技巧
- 🎯 提前選好獎項，準備就緒再按按鈕
- 🎯 使用全螢幕模式提升視覺效果
- 🎯 確保音效檔案已放置，增強氛圍
- 🎯 測試按鈕反應時間，避免現場出錯

## 注意事項

1. **焦點問題**：如果熱鍵無反應，點擊抽獎畫面獲得焦點
2. **測試建議**：正式使用前務必測試所有按鈕
3. **備用方案**：準備滑鼠作為備用操作方式
4. **全螢幕模式**：建議使用全螢幕模式以獲得最佳體驗

## 購買建議

### 推薦實體按鈕產品
1. **USB 大按鈕** - 搜尋關鍵字：
   - "USB Big Button"
   - "Arcade Button USB"
   - "可編程按鈕"
   
2. **價格範圍**：
   - 基礎款：$10-30 USD
   - 專業款：$30-100 USD
   - 自製版：$5-20 USD

3. **購買平台**：
   - Amazon
   - 淘寶/拼多多
   - AliExpress
   - 蝦皮購物

---

**祝您抽獎順利！** 🎉
